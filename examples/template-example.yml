# Example using template system
# This demonstrates how templates work in LXC Compose

version: '1.0'

containers:
  # Example 1: Simple template usage with includes and packages
  myapp:
    template: ubuntu-24.04  # Uses Ubuntu 24.04 LTS template
    includes:
      - nginx       # Library service from library/ubuntu/24.04/nginx/
    packages:
      - python3     # Additional packages to install
      - python3-pip
    post_install:
      - name: "Configure app"
        command: |
          echo "Setting up my application..."
          # Template's init commands run first, then nginx setup, then these
  
  # Example 2: Using an alias template
  cache:
    template: alpine  # Resolves to alpine-3.19
    includes:
      - redis
  
  # Example 3: Database with Debian template
  database:
    template: debian-bookworm  # Resolves to debian-12
    includes:
      - postgresql
    environment:
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD:-secret}
  
  # Example 4: Minimal Ubuntu for microservice
  api:
    template: ubuntu-minimal-lts  # Resolves to ubuntu-minimal-24.04
    packages:
      - python3      # Packages to install (not library services)
      - python3-pip
    post_install:
      - name: "Install Python app"
        command: |
          pip3 install fastapi uvicorn

# Notes:
# 1. Templates provide base image and initial configuration
# 2. Template's base_packages are installed first
# 3. Template's init_commands run before container's post_install
# 4. Container configuration extends/overrides template settings
# 5. Either use 'template:' OR 'image:', not both