# Example using template system
# This demonstrates how templates work in LXC Compose

version: '1.0'

containers:
  # Example 1: Simple template usage
  myapp:
    template: ubuntu-24.04  # Uses Ubuntu 24.04 LTS template
    packages:
      - nginx
      - python3
    exposed_ports:
      - 80
    post_install:
      - name: "Configure app"
        command: |
          echo "Setting up my application..."
          # Template's init commands run first, then these
  
  # Example 2: Using an alias template
  cache:
    template: alpine  # Resolves to alpine-3.19
    packages:
      - redis
    exposed_ports:
      - 6379
  
  # Example 3: Database with Debian template
  database:
    template: debian-bookworm  # Resolves to debian-12
    packages:
      - postgresql
    exposed_ports:
      - 5432
    environment:
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD:-secret}
  
  # Example 4: Minimal Ubuntu for microservice
  api:
    template: ubuntu-minimal-lts  # Resolves to ubuntu-minimal-24.04
    packages:
      - python3
      - python3-pip
    exposed_ports:
      - 8000
    post_install:
      - name: "Install Python app"
        command: |
          pip3 install fastapi uvicorn

# Notes:
# 1. Templates provide base image and initial configuration
# 2. Template's base_packages are installed first
# 3. Template's init_commands run before container's post_install
# 4. Container configuration extends/overrides template settings
# 5. Either use 'template:' OR 'image:', not both