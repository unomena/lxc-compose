# Example LXC Compose configuration with integrated syntax
# Port forwards and dependencies are now part of container configuration

version: '1.0'

containers:
  db:
    template: ubuntu
    release: jammy
    
    aliases:
      - database
      - postgres
      - postgresql
    
    # Port forwarding using Docker-like syntax
    ports:
      - 5432:5432  # PostgreSQL
    
    packages:
      - postgresql
      - postgresql-contrib
    
    environment:
      POSTGRES_USER: appuser
      POSTGRES_PASSWORD: apppass123
      POSTGRES_DB: appdb

  app:
    template: ubuntu  
    release: jammy
    
    aliases:
      - web
      - frontend
    
    # Simple dependency list
    depends_on:
      - db
    
    # Simple Docker-like mount syntax
    mounts:
      - .:/app                    # Current directory to /app
      - ./data:/data              # Relative path
      - /var/log/host:/var/log    # Absolute path
    
    # Port forwarding with optional descriptions
    ports:
      - 8080:80    # Web application
    
    packages:
      - python3
      - python3-pip
      - nginx
    
    environment:
      DATABASE_URL: postgresql://appuser:apppass123@db:5432/appdb
      DEBUG: "False"
      SECRET_KEY: "change-me-in-production"
    
    services:
      web:
        command: python3 /app/server.py
        directory: /app
        autostart: true
        autorestart: true